{
  "task_id": "9c2b8daadf",
  "persona": "developer",
  "mission": "MC Dashboard Mission 2 â€” Fix route mounting",
  "stage": "implement",
  "instruction": "Fix serve.go to mount api.Server routes instead of inline handlers. Read design at .mission/findings/6e2f90ed5a.md for exact approach.",
  "steps": [
    "Read /home/mike/MissionControl/orchestrator/serve/serve.go",
    "Read /home/mike/MissionControl/orchestrator/api/server.go to understand api.NewServer signature",
    "Read /home/mike/MissionControl/orchestrator/api/routes.go to see what Routes() provides",
    "Create api.NewServer(missionDir, hub, tracker, accumulator) and mount via mux.Handle('/api/', apiServer.Routes())",
    "Remove inline handlers that duplicate api.Server routes: /api/health, /api/status, /api/tokens, /api/workers, /api/requirements, /api/requirements/coverage, /api/specs, /api/specs/orphans",
    "Remove local writeJSON helper if no longer used",
    "Keep /ws WebSocket handler on outer mux",
    "Keep OpenClaw bridge routes on outer mux (they register conditionally)",
    "Add audit to buildState(): read .mission/state/audit.jsonl, parse entries, include as 'audit' key",
    "Run 'go build ./...' to verify compilation",
    "Write findings to /home/mike/Darlington/.mission/findings/9c2b8daadf.md",
    "Mark done: /home/mike/MissionControl/dist/mc task update 9c2b8daadf --status done"
  ],
  "scope_paths": ["orchestrator/serve/serve.go"],
  "repo": "/home/mike/MissionControl"
}
